<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oria To Do | Local Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-dark: #0a0a0a;
            --glass-bg: rgba(22, 22, 22, 0.7);
            --accent: #22c55e;
            --border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #e5e7eb;
            overflow: hidden;
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid var(--border);
        }

        .editor-container {
            background: radial-gradient(circle at top left, #111, #0a0a0a);
        }

        #editor {
            background: transparent;
            border: none;
            outline: none;
            resize: none;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #d1d5db;
            caret-color: var(--accent);
        }

        .note-item {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 3px solid transparent;
        }

        .note-item.active {
            background: rgba(34, 197, 94, 0.1);
            border-left: 3px solid var(--accent);
            color: white;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-local { background-color: #3b82f6; box-shadow: 0 0 10px #3b82f6; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex">

    <!-- Sidebar -->
    <aside class="w-72 glass-panel flex flex-col h-full z-10">
        <div class="p-6 border-b border-white/5 flex items-center gap-3">
            <img src="https://ik.imagekit.io/tycncf0zq0/Oria.png?updatedAt=1767746764146" alt="Oria" class="w-8 h-8 object-contain">
            <h1 class="font-bold text-lg tracking-tight">Oria <span class="text-green-500">Local</span></h1>
        </div>

        <div class="p-4">
            <button id="newNote" class="w-full flex items-center justify-center gap-2 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/5 text-sm font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                New Entry
            </button>
        </div>

        <div id="noteList" class="flex-1 overflow-y-auto px-3 py-2 space-y-1">
            <!-- Notes populate here -->
        </div>

        <div class="p-6 border-t border-white/5 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="status-dot status-local"></span>
                <span class="text-[10px] uppercase tracking-widest opacity-50 font-bold">Local Storage</span>
            </div>
            <div id="saveMsg" class="text-[10px] text-green-500 opacity-0 transition-opacity">Saved</div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col editor-container relative">
        <div class="h-16 flex items-center justify-between px-8 border-b border-white/5">
            <input id="noteTitle" type="text" class="bg-transparent border-none outline-none text-lg font-semibold w-1/2" placeholder="Untitled Entry">
            <div class="flex items-center gap-4">
                <button id="deleteNote" class="p-2 text-white/30 hover:text-red-400 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="flex-1 flex justify-center p-8 lg:p-12 overflow-y-auto">
            <textarea id="editor" class="w-full max-w-3xl h-full" placeholder="Start typing..."></textarea>
        </div>
    </main>

    <script>
        const editor = document.getElementById('editor');
        const noteTitle = document.getElementById('noteTitle');
        const noteList = document.getElementById('noteList');
        const newNoteBtn = document.getElementById('newNote');
        const deleteNoteBtn = document.getElementById('deleteNote');
        const saveMsg = document.getElementById('saveMsg');

        let notes = JSON.parse(localStorage.getItem('oria_notes')) || [];
        let currentNoteId = localStorage.getItem('oria_current_note_id') || null;

        function saveToDisk() {
            localStorage.setItem('oria_notes', JSON.stringify(notes));
            localStorage.setItem('oria_current_note_id', currentNoteId);
        }

        function renderNoteList() {
            noteList.innerHTML = '';
            notes.sort((a, b) => b.updatedAt - a.updatedAt).forEach(note => {
                const div = document.createElement('div');
                div.className = `note-item p-4 rounded-xl cursor-pointer text-sm truncate ${currentNoteId === note.id ? 'active' : 'text-white/40 hover:text-white/70 hover:bg-white/5'}`;
                div.innerText = note.title || 'Untitled Entry';
                div.onclick = () => switchNote(note.id);
                noteList.appendChild(div);
            });
        }

        function switchNote(id) {
            currentNoteId = id;
            const note = notes.find(n => n.id === id);
            if (note) {
                noteTitle.value = note.title;
                editor.value = note.content;
            } else {
                noteTitle.value = '';
                editor.value = '';
            }
            renderNoteList();
            saveToDisk();
        }

        function createNote() {
            const newNote = {
                id: 'note_' + Date.now(),
                title: 'New Entry',
                content: '',
                updatedAt: Date.now()
            };
            notes.push(newNote);
            currentNoteId = newNote.id;
            switchNote(newNote.id);
        }

        function deleteNote() {
            if (!currentNoteId) return;
            if (confirm('Delete this entry?')) {
                notes = notes.filter(n => n.id !== currentNoteId);
                currentNoteId = notes.length > 0 ? notes[0].id : null;
                if (currentNoteId) {
                    switchNote(currentNoteId);
                } else {
                    noteTitle.value = '';
                    editor.value = '';
                    renderNoteList();
                    saveToDisk();
                }
            }
        }

        function handleInput() {
            if (!currentNoteId) {
                // If user starts typing but no note exists, create one
                const id = 'note_' + Date.now();
                notes.push({ id, title: 'New Entry', content: '', updatedAt: Date.now() });
                currentNoteId = id;
            }

            const note = notes.find(n => n.id === currentNoteId);
            if (note) {
                note.title = noteTitle.value;
                note.content = editor.value;
                note.updatedAt = Date.now();
                
                // Visual save feedback
                saveMsg.style.opacity = '1';
                clearTimeout(window.saveMsgTimeout);
                window.saveMsgTimeout = setTimeout(() => {
                    saveMsg.style.opacity = '0';
                }, 800);

                saveToDisk();
                // We don't re-render the whole list on every keystroke to keep it smooth, 
                // just update the text of the active sidebar item
                const activeItem = document.querySelector('.note-item.active');
                if (activeItem) activeItem.innerText = note.title || 'Untitled Entry';
            }
        }

        // Event Listeners
        editor.addEventListener('input', handleInput);
        noteTitle.addEventListener('input', handleInput);
        newNoteBtn.addEventListener('click', createNote);
        deleteNoteBtn.addEventListener('click', deleteNote);

        // Initial Load
        if (notes.length === 0) {
            createNote();
        } else {
            if (!currentNoteId || !notes.find(n => n.id === currentNoteId)) {
                currentNoteId = notes[0].id;
            }
            switchNote(currentNoteId);
        }
    </script>
</body>
</html>
